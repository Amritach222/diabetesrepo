{"version":3,"file":"static/js/868.2c53b948.chunk.js","mappings":"sSAgDA,EA5CkB,SAAC,GAAmB,IAAlBA,EAAiB,EAAjBA,QAAQC,EAAS,EAATA,KAC1B,OACE,gBAAKC,UAAU,oBAAf,SAEsB,IAAnBF,EAAQG,OACP,sCAEI,4BACA,kCAAUF,MACd,mBAAOC,UAAU,QAAQE,MAAO,CAACC,SAAS,QAA1C,WACE,kBAAOD,MAAO,CAACE,WAAW,WAA1B,UACA,2BACE,eAAIC,MAAM,MAAML,UAAU,aAA1B,kBACA,eAAIK,MAAM,MAAML,UAAU,aAA1B,0BACA,eAAIK,MAAM,MAAML,UAAU,aAA1B,wBACA,eAAIK,MAAM,MAAML,UAAU,aAA1B,oBACA,eAAIK,MAAM,MAAML,UAAU,aAA1B,qBACA,eAAIK,MAAM,MAAML,UAAU,aAA1B,4BACA,eAAIK,MAAM,MAAML,UAAU,aAA1B,wBAGF,2BAECF,EAAQQ,KAAI,SAACC,EAAKC,GAAN,OACX,2BACE,wBAAKA,EAAM,KACX,0BAAKD,EAAKE,YAAV,aACA,wBAAKF,EAAKG,gBACV,wBAAKH,EAAKI,UACV,wBAAKJ,EAAKK,UACV,0BAAKL,EAAKM,cAAV,eACA,wBACGN,EAAKO,SARDP,EAAKQ,kB,2BCHOC,OACjC,IAqLA,EArLgB,WACd,OAA+BC,EAAAA,EAAAA,UAAS,IAAxC,eAAOC,EAAP,KAAiBC,EAAjB,KACA,GAAuCF,EAAAA,EAAAA,UAAS,IAAhD,eAAOG,EAAP,KAAqBC,EAArB,KACA,GAA6BJ,EAAAA,EAAAA,WAAS,GAAtC,eAAOK,EAAP,KAAgBC,EAAhB,KACA,GAA2BN,EAAAA,EAAAA,WAAS,GAApC,eAAOnB,EAAP,KAAe0B,EAAf,KACA,GAAsBP,EAAAA,EAAAA,YAAtB,eAAOlB,EAAP,KAAa0B,EAAb,MACAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAQC,aAAaC,QAAQ,UACjCC,IAAAA,IAAU,iDAAiD,CACzDf,GAAGY,IACFI,MAAK,SAACC,GACP,GAAGA,EAAIC,KAAKA,KAAK,CACf,IAAMC,EAASF,EAAIC,KAAKA,KAAK,GAAGlC,KAC1BoC,EAASH,EAAIC,KAAKA,KAAK,GAAGE,SAChCV,EAAQU,GACRL,IAAAA,IAAU,yDAAyD,CACjEI,SAASA,IACRH,MAAK,SAACC,GACJA,EAAIC,KAAKA,MACVd,EAAaa,EAAIC,KAAKA,SAEvBG,OAAM,SAACC,GACRC,QAAQC,IAAI,sCAAsCF,UAGrDD,OAAM,SAACC,GACRC,QAAQC,IAAIF,QAEhB,IAiFF,OACE,iBAAKrC,UAAU,aAAf,WACE,gBAAKA,UAAU,oBAAf,UACE,UAAC,KAAD,CAASA,UAAU,cAAcwC,QAAS,WAtB9ChB,GAAY1B,IAsByD2C,MAAM,OAAOC,QAAQ,UAAtF,WAAgG,SAAC,IAAD,CAAOC,KAAMC,EAAAA,IAA7G,yBAEF,iBAAK5C,UAAYF,EAAiB,GAAT,SAAzB,WACE,gBAAKE,UAAU,mCAAf,UACE,UAAC,KAAD,CAASA,UAAU,GAAGwC,QAAS,YAnDtB,WACf,IAAMzB,EAAGa,aAAaC,QAAQ,UAC9BC,IAAAA,IAAW,+CAA+C,CACxDe,QAAQ9B,IAEPgB,MAAK,SAACC,GAEFA,EAAIC,KAAKA,KAEdH,IAAAA,IAAU,6CAA6C,CAACf,GAAGA,IAAKgB,MAAK,SAACC,GAC/C,GAAlBA,EAAIC,KAAKa,QACVC,MAAM,sBAENA,MAAM,0CAINA,MAAM,sCAGPX,OAAM,SAACC,GACRC,QAAQC,IAAI,kBAAkBF,MA8BQW,IAAyBP,MAAM,UAAUC,QAAQ,UAArF,WAA+F,SAAC,IAAD,CAAOC,KAAMM,EAAAA,IAA5G,kCAEF,gBAAKjD,UAAU,mCAAf,UACE,UAAC,KAAD,CAASA,UAAU,GAAGwC,QAAS,YAzFrB,SAACP,GAEf,IAAIiB,EAAI,IAAIC,EAAAA,QAKRC,EAAY,GAElBnB,EAAK3B,KAAI,SAACC,EAAKC,GACb,IAAM6C,EAAS,CACb7C,EAAM,EACND,EAAKE,YAAY,SACjBF,EAAKG,aACLH,EAAKI,OACLJ,EAAKK,OACLL,EAAKM,cAAc,WACnBN,EAAK+C,cACL/C,EAAKO,MAGPsC,EAAUG,KAAKF,MAEjBH,EAAIM,QAAQ,WACZN,EAAIO,KAAK,GAAG,GAAG,uBAAuB1D,GAEtCmD,EAAIQ,UArBgB,CAAC,MAAO,cAAe,YAAa,QAAS,SAAS,gBAAgB,gBAAgB,QAqB/EN,EAAW,CAAEO,OAAQ,KAChD,IAAM7C,EAAO8C,OAAOC,MAAM,KAEpBC,EAAUhD,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAE7DoC,EAAIa,KAAJ,iBAAmBD,EAAnB,SA0D0CE,CAAY9C,IAAcuB,MAAM,OAAOC,QAAQ,UAAnF,WAA6F,SAAC,IAAD,CAAOC,KAAMsB,EAAAA,IAA1G,yBAEJ,SAAC,EAAD,CAAanE,QAASoB,EAAYnB,KAAMA,QAExC,SAAC,KAAD,CAAOC,UAAWF,EAAQ,SAAS,OAAnC,UACE,UAAC,KAAD,YACE,gBAAKE,UAAU,mBAAf,UACA,SAAC,KAAD,CAAOA,UAAU,SAAjB,UACA,SAAC,KAAD,CAAYE,MAAO,CAACgE,QAAQ,OAAOC,MAAM,SAAUC,SAAU,SAACC,IAnCnD,SAACA,GAClB,IAAMC,EAAWD,EAAEE,OAAOC,MACtBC,EAAOH,EAAWI,MAAM,EAAG,GAC3BC,EAAQL,EAAWI,MAAM,EAAG,GAC5BE,EAAMN,EAAWI,MAAM,EAAG,IACV,GAAjBC,EAAME,OAAO,KACdF,EAAML,EAAWO,OAAO,IAER,GAAfD,EAAIC,OAAO,KACZD,EAAIN,EAAWO,OAAO,IAExB,IAAMC,EAAUH,EAAM,IAAIC,EAAI,IAAIH,EAClCnC,QAAQC,IAAIuC,GACb,IAAMC,EAAU7D,EAAU8D,QAAO,SAACzE,GAAD,OAASA,EAAKO,KAAKmE,SAASH,MAC5DzD,EAAiB0D,GACjBxD,GAAY,GAoB6D2D,CAAab,IAAKc,KAAK,OAAQpE,GAAG,kCAGzG,UAAC,KAAD,CAAQqE,MAAM,SAASpF,UAAU,mBAAmBqF,OAAK,EAACC,YAAU,EAACpF,MAAO,CAACC,SAAS,QAAtF,WACE,SAAC,IAAD,CAAYsC,MAAM,QAAlB,UACE,UAAC,KAAD,YACE,SAAC,KAAD,CAAkBzC,UAAU,cAA5B,kBACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,0BACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,wBACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,oBACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,qBACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,4BACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,4BACA,SAAC,KAAD,CAAkBA,UAAU,cAA5B,wBAGJ,SAAC,KAAD,UACGsB,EACCF,EAAcd,KAAI,SAACC,EAAMC,GAAP,OAChB,UAAC,KAAD,CAAW,QAAM,qBAAjB,WACE,SAAC,KAAD,CAAgBR,UAAU,cAA1B,SAAyCQ,EAAM,KAC/C,UAAC,KAAD,CAAgBR,UAAU,cAA1B,UAA0CO,EAAKE,YAA/C,aACA,SAAC,KAAD,CAAgBT,UAAU,cAA1B,SAAyCO,EAAKG,gBAC9C,SAAC,KAAD,CAAgBV,UAAU,cAA1B,SAAyCO,EAAKI,UAC9C,SAAC,KAAD,CAAgBX,UAAU,cAA1B,SAAyCO,EAAKK,UAC9C,UAAC,KAAD,CAAgBZ,UAAU,cAA1B,UAAyCO,EAAKM,cAA9C,eACA,SAAC,KAAD,CAAgBb,UAAU,cAA1B,SAAyCO,EAAK+C,iBAC9C,SAAC,KAAD,CAAgBtD,UAAU,2BAA1B,SAAuDO,EAAKO,QAC5D,SAAC,KAAD,MATyCN,MAY1CU,EAAUZ,KAAI,SAACC,EAAMC,GAAP,OACf,UAAC,KAAD,CAAW,QAAM,qBAAjB,WACE,SAAC,KAAD,CAAgBR,UAAU,cAA1B,SAAyCQ,EAAM,KAC/C,UAAC,KAAD,CAAgBR,UAAU,cAA1B,UAA0CO,EAAKE,YAA/C,aACA,SAAC,KAAD,CAAgBT,UAAU,cAA1B,SAAyCO,EAAKG,gBAC9C,SAAC,KAAD,CAAgBV,UAAU,cAA1B,SAAyCO,EAAKI,UAC9C,SAAC,KAAD,CAAgBX,UAAU,cAA1B,SAAyCO,EAAKK,UAC9C,UAAC,KAAD,CAAgBZ,UAAU,cAA1B,UAAyCO,EAAKM,cAA9C,eACA,SAAC,KAAD,CAAgBb,UAAU,cAA1B,SAAyCO,EAAK+C,iBAC9C,SAAC,KAAD,CAAgBtD,UAAU,2BAA1B,SAAuDO,EAAKO,QAC5D,SAAC,KAAD,MATyCN","sources":["components/PDF/GeneratePDF.js","views/activities/Activity.js"],"sourcesContent":["import React  from \"react\";\nimport { Link } from \"react-router-dom\";\n// Create Document Component\n// eslint-disable-next-line react/prop-types\nconst GeneratePDF=({preview,name})=> {\n  return (\n    <div className=\"container_preview\">\n      {/* eslint-disable-next-line react/prop-types */}\n      {preview.length === 0 ? (\n        \"You currently have no data created\"\n      ) : (\n            <div>\n            <p>Name: {name}</p>\n        <table className=\"table\" style={{fontSize:'12px'}}>\n          <thead style={{background:'#2980ba'}}>\n          <tr>\n            <th scope=\"col\" className=\"text-white\">S.N</th>\n            <th scope=\"col\" className=\"text-white\">Sugar Level</th>\n            <th scope=\"col\" className=\"text-white\">Breakfast</th>\n            <th scope=\"col\" className=\"text-white\">Lunch</th>\n            <th scope=\"col\" className=\"text-white\">Dinner</th>\n            <th scope=\"col\" className=\"text-white\">Exercise Time</th>\n            <th scope=\"col\" className=\"text-white\">Date</th>\n          </tr>\n          </thead>\n          <tbody>\n          {/* eslint-disable-next-line react/prop-types */}\n          {preview.map((item,index) => (\n            <tr key={item.id}>\n              <td>{index+1}</td>\n              <td>{item.sugar_level} mg/dL</td>\n              <td>{item.morning_meal}</td>\n              <td>{item.launch}</td>\n              <td>{item.dinner}</td>\n              <td>{item.exercise_time} minutes</td>\n              <td >\n                {item.date}\n              </td>\n\n            </tr>\n          ))}\n          </tbody>\n        </table>\n            </div>\n      )}\n    </div>\n  );\n}\nexport default GeneratePDF;\n","import React, {useEffect, useState, PureComponent, useRef} from 'react'\nimport {\n  CButton,\n  CCard, CCardBody, CForm, CFormInput,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow\n} from \"@coreui/react\";\nimport './activity.scss'\nimport CIcon from \"@coreui/icons-react\";\nimport {cilCloudDownload, cilSend, cilSettings} from \"@coreui/icons\";\nimport Axios from \"axios\";\nimport jsPDF from 'jspdf'\nimport GeneratePDF from '../../components/PDF/GeneratePDF'\nimport 'jspdf-autotable'\nimport emailjs from '@emailjs/browser'\nimport * as PropTypes from \"prop-types\";\n\nfunction CDatePicker(props) {\n  return null;\n}\n\nCDatePicker.propTypes = {locale: PropTypes.string};\nconst Activity= ()=>{\n  const [userTable,setUserTable]=useState([]);\n  const [userTemptable,setUserTemptable]=useState([]);\n  const [tempopen,setTempopen]=useState(false)\n  const [preview,setPreview]=useState(false)\n  const [name, setName]=useState()\n  useEffect(()=>{\n    const userId= localStorage.getItem(\"userId\")\n      Axios.put('http://localhost:3001/api/users/getUserdetails',{\n        id:userId\n      }).then((res)=>{\n        if(res.data.data){\n          const username=res.data.data[0].name;\n          const fullname=res.data.data[0].fullname;\n          setName(fullname)\n          Axios.put('http://localhost:3001/api/userDetails/getuseractivity/',{\n            username:username\n          }).then((res)=>{\n            if(res.data.data){\n              setUserTable(res.data.data)\n            }\n          }).catch((err)=>{\n            console.log(\"Error occured in activity aslling :\",err)\n          })\n        }\n      }).catch((err)=>{\n        console.log(err)\n      })\n  },[])\n  // function for generating pdf\n  const generatePDF=(data)=>{\n    // intialize jsPDF\n      var doc=new jsPDF();\n      // Setting font\n    // define the columns we want and their titles\n    const tableColumn = [\"S.N\", \"Sugar Level\", \"Breakfast\", \"Lunch\", \"Dinner\",\"Exercise Time\",\"Health Issues\",\"Date\"];\n    // define an empty array of rows\n    const tableRows = [];\n    // for each ticket pass all its data into an array\n    data.map((item,index)=>{\n      const mealData=[\n        index+1,\n        item.sugar_level+\" mg/dL\",\n        item.morning_meal,\n        item.launch,\n        item.dinner,\n        item.exercise_time+\" minutes\",\n        item.health_issues,\n        item.date\n      ];\n      // push each item to the row\n      tableRows.push(mealData)\n    })\n    doc.setFont('courier');\n    doc.text(15,20,'Daily Activities of '+name);\n    // startY is basically margin-top\n    doc.autoTable(tableColumn, tableRows, { startY: 25 });\n    const date = Date().split(\" \");\n    // we use a date string to generate our filename.\n    const dateStr = date[0] + date[1] + date[2] + date[3] + date[4];\n    // we define the name of our PDF file.\n    doc.save(`report_${dateStr}.pdf`);\n  }\n\n  // function for Sending  pdf using mail to the doctor\n  const sendReport=()=>{\n    const id=localStorage.getItem('userId')\n    Axios.put( 'http://localhost:3001/api/doctors/getDoctor/',{\n      user_id:id\n    })\n      .then((res) => {\n        //handle success\n        if(res.data.data)\n        {\n      Axios.put('http://localhost:3001/api/users/sendreport',{id:id}).then((res)=>{\n        if(res.data.success==1){\n          alert(\"Successfully sent!\")\n        }else{\n          alert(\"Unable to send email to your doctor\")\n        }\n      })\n        }else{\n          alert(\"You have not added your doctor!\")\n        }\n\n      }).catch((err)=>{\n        console.log(\"Error occured! \"+err)\n    })\n  }\n  const previewReport =()=>{\n    setPreview(!preview)\n  }\n  const handleSearch=(e)=>{\n    const date_value=e.target.value;\n    let year = date_value.slice(0, 4);\n    let month = date_value.slice(5, 7);\n    let day = date_value.slice(8, 10);\n    if(month.charAt(0)==0){\n      month=date_value.charAt(6)\n    }\n    if(day.charAt(0)==0){\n      day=date_value.charAt(9)\n    }\n    const full_date=month+'/'+day+'/'+year;\n    console.log(full_date)\n   const userData= userTable.filter((item)=> item.date.includes(full_date))\n    setUserTemptable(userData);\n    setTempopen(true);\n  }\n  return(\n    <div className=\"activities\">\n      <div className=\"button_class mb-2\">\n        <CButton className=\"float-right\" onClick={()=>{previewReport()}} color=\"dark\" variant=\"outline\"><CIcon icon={cilSettings} /> Generate Report</CButton>\n      </div>\n      <div className={!preview?'d-none':''}>\n        <div className=\"button_class mb-2 float-end me-3\">\n          <CButton className=\"\" onClick={()=>{sendReport(userTable)}}  color=\"success\" variant=\"outline\"><CIcon icon={cilSend} /> Send report to my doctor</CButton>\n        </div>\n        <div className=\"button_class mb-2 float-end me-3\">\n          <CButton className=\"\" onClick={()=>{generatePDF(userTable)}}  color=\"info\" variant=\"outline\"><CIcon icon={cilCloudDownload} /> Download Report</CButton>\n        </div>\n      <GeneratePDF preview={userTable}  name={name} />\n      </div>\n      <CCard className={preview?'d-none':'mb-4'}>\n        <CCardBody>\n          <div className=\"search_container\"  >\n          <CForm className=\"d-flex\" >\n          <CFormInput style={{outline:'none',width:'180px'}} onChange={(e)=>{handleSearch(e)}} type=\"date\"  id=\"exampleFormControlInput1\" />\n          </CForm>\n          </div>\n      <CTable align=\"middle\" className=\"mb-0 border mt-2\" hover responsive style={{fontSize:'12px'}}>\n        <CTableHead color=\"light\">\n          <CTableRow >\n            <CTableHeaderCell className=\"text-center\">S.N</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Sugar Level</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Breakfast</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Lunch</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Dinner</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Exercise Time</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Health Issues</CTableHeaderCell>\n            <CTableHeaderCell className=\"text-center\">Date</CTableHeaderCell>\n          </CTableRow>\n        </CTableHead>\n        <CTableBody>\n          {tempopen?\n            userTemptable.map((item, index) => (\n              <CTableRow v-for=\"item in tableItems\" key={index}>\n                <CTableDataCell className=\"text-center\">{index+1}</CTableDataCell>\n                <CTableDataCell className=\"text-center\" >{item.sugar_level} mg/dL</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.morning_meal}</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.launch}</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.dinner}</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.exercise_time} minutes</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.health_issues}</CTableDataCell>\n                <CTableDataCell className=\"text-center text-primary\" >{item.date}</CTableDataCell>\n                <CTableDataCell>\n                </CTableDataCell>\n              </CTableRow>\n            )):userTable.map((item, index) => (\n              <CTableRow v-for=\"item in tableItems\" key={index}>\n                <CTableDataCell className=\"text-center\">{index+1}</CTableDataCell>\n                <CTableDataCell className=\"text-center\" >{item.sugar_level} mg/dL</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.morning_meal}</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.launch}</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.dinner}</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.exercise_time} minutes</CTableDataCell>\n                <CTableDataCell className=\"text-center\">{item.health_issues}</CTableDataCell>\n                <CTableDataCell className=\"text-center text-primary\" >{item.date}</CTableDataCell>\n                <CTableDataCell>\n                </CTableDataCell>\n              </CTableRow>\n            ))\n\n          }\n        </CTableBody>\n      </CTable>\n        </CCardBody>\n      </CCard>\n    </div>\n  )\n}\nexport default  Activity\n"],"names":["preview","name","className","length","style","fontSize","background","scope","map","item","index","sugar_level","morning_meal","launch","dinner","exercise_time","date","id","PropTypes","useState","userTable","setUserTable","userTemptable","setUserTemptable","tempopen","setTempopen","setPreview","setName","useEffect","userId","localStorage","getItem","Axios","then","res","data","username","fullname","catch","err","console","log","onClick","color","variant","icon","cilSettings","user_id","success","alert","sendReport","cilSend","doc","jsPDF","tableRows","mealData","health_issues","push","setFont","text","autoTable","startY","Date","split","dateStr","save","generatePDF","cilCloudDownload","outline","width","onChange","e","date_value","target","value","year","slice","month","day","charAt","full_date","userData","filter","includes","handleSearch","type","align","hover","responsive"],"sourceRoot":""}